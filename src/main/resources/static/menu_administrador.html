<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administración</title>
    <link rel="stylesheet" href="menu_administrador.css">
    <script src="utilesVista.js"></script>
    <script src="vistaWeb.js"></script>
    <script src='sse.js'></script>
</head>
<body>
    <!-- Sidebar -->
    <nav class="sidebar">
        <button class="toggle-button" onclick="toggleSidebar()"></button>
        <div class="nav-container">
            <h2><span style="text-decoration: none; color: inherit;">Sistema de Peajes</span></h2>
            <ul class="nav-links">
                <li><button onclick="cargarContenido('asignar_bonificaciones.html')" class="nav-button">Asignar Bonificación</button></li>
                <li><button onclick="cargarContenido('emular_transito.html')" class="nav-button">Emular Tránsito</button></li>
                <li><button onclick="cargarContenido('cambiar_estado.html')" class="nav-button">Cambiar Estado</button></li>
            </ul>
        </div>
        <button onclick="cerrarSesion()" class="btn-salir">Salir</button>
    </nav>

    <div class="content">
        <iframe id="contenidoFrame" src="presentacion.html"></iframe>
    </div>

    <script>
        // URL para cerrar sesión (a completar)
        const URL_CERRAR_SESION = "acceso/salirAdministrador"; // Esta URL debe ser reemplazada por la correcta
        urlRegistroSSE="/menu/registrarSSE";
        
        function cerrarSesion() {
            // Realizar la petición de cierre de sesión
            submit(URL_CERRAR_SESION, "");
        }

        // Manejador de respuesta exitosa del cierre de sesión
        function mostrar_LogoutExitoso(urlDestino) {
            window.location.href = urlDestino;
        }

        function cargarContenido(pagina) {
            document.getElementById('contenidoFrame').src = pagina;
        }

        function toggleSidebar() {
            const sidebar = document.querySelector('.sidebar');
            sidebar.classList.toggle('collapsed');
            
            // Guardar el estado en localStorage para mantenerlo entre recargas
            localStorage.setItem('sidebarCollapsed', sidebar.classList.contains('collapsed'));
        }

        // Restaurar el estado del sidebar al cargar la página
        window.addEventListener('load', function() {
            const sidebar = document.querySelector('.sidebar');
            const isCollapsed = localStorage.getItem('sidebarCollapsed') === 'true';
            if (isCollapsed) {
                sidebar.classList.add('collapsed');
            }
        });
    </script>

</body>
</html>